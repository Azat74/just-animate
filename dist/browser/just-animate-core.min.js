!function(){"use strict";function t(t,e){return st.call(t,e||0)}function e(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n])}function n(t,e){for(var n="",r=0,i=t.length;i>r;r++){var a=t[r],o=e(a);o>n&&(n=o)}return n}function r(t,e){for(var n=[],r=0,i=t.length;i>r;r++){var a=e(t[r]);a!==D&&n.push(a)}return n}function i(t,e){ut.apply(t,e)}function a(t){return!f(t)&&u(t.length)}function o(t){return t!==D&&null!==t&&""!==t}function s(t){return"[object Function]"===ct.call(t)}function u(t){return"number"==typeof t}function c(t){return"object"==typeof t&&null!==t}function f(t){return"string"==typeof t}function l(t){return s(t)?t():t}function _(t,e,n){return n>e?t>=e&&n>=t:t>=n&&e>=t}function v(t){return new Error("Bad: "+t)}function h(n){if(!n)throw v("source");if(f(n)){var r=document.querySelectorAll(n);return t(r)}if("string"==typeof n.tagName)return[n];if(s(n)){var i=n,o=i();return h(o)}if(a(n)){var u=[];return e(n,function(t){var e=h(t);u.push.apply(u,e)}),u}return[]}function p(){var t=this;return t=t instanceof p?t:Object.create(p.prototype),t._fn={},t}function d(t,e,n){var r=this instanceof d?this:Object.create(d.prototype),i=n.to-n.from;r._iterationStart=l(n.iterationStart)||0,r._iterations=l(n.iterations)||1,r._duration=i,r._startTime=n.from||0,r._endTime=n.to,r._totalDuration=(r._iterations||1)*i;var a=p();r._dispatcher=a;var o=t[R](e,{delay:l(n.delay)||void 0,direction:l(n.direction),duration:i,easing:n.easing||"linear",fill:n.fill||"none",iterationStart:r._iterationStart,iterations:r._iterations});return o.cancel(),o.onfinish=function(){return a.trigger(X)},r._animator=o,r}function m(t,e,n){return e+n.toUpperCase()}function g(t){return f(t)?t.replace(vt,m):D}function y(t){if(t.length<2)return t;var e=t[0];0!==e.offset&&(e.offset=0);var n=t[t.length-1];1!==n.offset&&(n.offset=1);for(var r=t.length,i=r-1,a=1;i>a;a++){var o=t[a];if(!u(o.offset))for(var s=a+1;r>s;s++)if(u(t[s].offset)){for(var c=t[a-1].offset,f=t[s].offset,l=f-c,_=s-a+1,v=1;_>v;v++)t[v-1+a].offset=v/s*l+c;a=s;break}}return t}function T(t){if(t.length<2)return t;var e=t[0];0!==e.offset&&(e.offset=0);for(var n=t[t.length-1],r=t.length,i=1;r>i;i++){var a=t[i];for(var s in a)s===dt||o(e[s])||(e[s]=a[s])}for(var i=r-2;i>-1;i--){var a=t[i];for(var s in a)s===dt||o(n[s])||(n[s]=a[s])}return t}function w(t){var e=0,n=1,r=2,i=[],s=[],c=[],l={},_="";for(var h in t){var p=t[h];if(o(p))switch(h){case N:if(a(p)){var d=p;if(3!==d.length)throw v(N);i[e]=d[e],i[n]=d[n],i[r]=d[r];continue}if(u(p)){i[e]=p,i[n]=p,i[r]=p;continue}throw v(N);case P:if(a(p)){var d=p;if(2!==d.length)throw v(P);i[e]=d[e],i[n]=d[n];continue}if(u(p)){i[e]=p,i[n]=p;continue}throw v(P);case U:if(u(p)){i[e]=p;continue}throw v(U);case G:if(u(p)){i[n]=p;continue}throw v(G);case H:if(u(p)){i[r]=p;continue}throw v(H);case J:if(a(p)){var d=p;if(2!==d.length)throw v(J);s[e]=d[e],s[n]=d[n];continue}if(u(p)){s[e]=p,s[n]=p;continue}throw v(J);case K:if(f(p)){s[e]=p;continue}throw v(K);case V:if(f(p)){s[n]=p;continue}throw v(V);case z:if(a(p)){var d=p;if(4!==d.length)throw v(z);_+=" rotate3d("+d[0]+","+d[1]+","+d[2]+","+d[3]+")";continue}throw v(z);case B:if(f(p)){_+=" rotate3d(1, 0, 0, "+p+")";continue}throw v(B);case Z:if(f(p)){_+=" rotate3d(0, 1, 0, "+p+")";continue}throw v(Z);case F:case q:if(f(p)){_+=" rotate3d(0, 0, 1, "+p+")";continue}throw v(q);case tt:if(a(p)){var d=p;if(3!==d.length)throw v(tt);c[e]=d[e],c[n]=d[n],c[r]=d[r];continue}if(f(p)||u(p)){c[e]=p,c[n]=p,c[r]=p;continue}throw v(z);case $:if(a(p)){var d=p;if(2!==d.length)throw v($);c[e]=d[e],c[n]=d[n];continue}if(f(p)||u(p)){c[e]=p,c[n]=p;continue}throw v($);case it:case et:if(f(p)||u(p)){c[e]=p;continue}throw v(it);case at:case nt:if(f(p)||u(p)){c[n]=p;continue}throw v(at);case ot:case rt:if(f(p)||u(p)){c[r]=p;continue}throw v(ot);case W:_+=" "+p;break;default:l[g(h)]=p}}var m=i[e]!==D,y=i[n]!==D,T=i[r]!==D;if(m&&T||y&&T){var w=i.map(function(t){return t||"1"}).join(",");_+=" scale3d("+w+")"}else m&&y?_+=" scale("+(i[e]||1)+", "+(i[n]||1)+")":m?_+=" scaleX("+i[e]+")":y?_+=" scaleX("+i[n]+")":T&&(_+=" scaleX("+i[r]+")");var k=s[e]!==D,S=s[n]!==D;k&&S?_+=" skew("+(s[e]||1)+", "+(s[n]||1)+")":k?_+=" skewX("+s[e]+")":S&&(_+=" skewY("+s[n]+")");var O=c[e]!==D,b=c[n]!==D,j=c[r]!==D;if(O&&j||b&&j){var A=c.map(function(t){return t||"1"}).join(",");_+=" translate3d("+A+")"}else O&&b?_+=" translate("+(c[e]||1)+", "+(c[n]||1)+")":O?_+=" translateX("+c[e]+")":b?_+=" translateY("+c[n]+")":j&&(_+=" translateZ("+c[r]+")");return _&&(l.transform=_),l}function k(t,e){var n=this instanceof k?this:Object.create(k.prototype);if(!o(Q))throw v(Q);return n._duration=0,n._totalDuration=0,n._currentTime=D,n._iterationStart=0,n._iterations=1,n._lastTick=D,n._playState="idle",n._playbackRate=1,n._startTime=0,n._events=[],n._resolver=t,n._timeLoop=e,n._dispatcher=p(),n._onTick=n._onTick.bind(n),n.on(X,n._onFinish),n.on(C,n._onCancel),n.on(E,n._onPause),n.play(),n}function S(){var t=this instanceof S?this:Object.create(S.prototype);return t.active=[],t.elapses=[],t.isActive=D,t.lastTime=D,t.offs=[],t.ons=[],t}function O(t){b(t),j(t);var e=t.active,n=t.elapses,r=e.length,i=t.lastTime||gt(),a=gt(),o=a-i;if(!r)return t.isActive=D,void(t.lastTime=D);t.isActive=!0,t.lastTime=a,yt(t,O);for(var s=0;r>s;s++){var u=n[s],c=u+o;n[s]=c,e[s](o,c)}}function b(t){for(var e=t.offs.length,n=0;e>n;n++){var r=t.offs[n],i=t.active.indexOf(r);-1!==i&&(t.active.splice(i,1),t.elapses.splice(i,1))}}function j(t){for(var e=t.ons.length,n=0;e>n;n++){var r=t.ons[n];-1===t.active.indexOf(r)&&(t.active.push(r),t.elapses.push(0))}}function A(){var t=this instanceof A?this:Object.create(A.prototype);return t.defs={},t}function I(){var t=this;return t=t instanceof I?t:Object.create(I.prototype),t._registry={},t._resolver=A(),t._timeLoop=S(),t}function x(t){var n=A();e(t,function(t){return n.registerAnimation(t,!0)})}var D=void 0,R="animate",C="cancel",L="cubic-bezier",Q="duration",X="finish",E="pause",M="play",Y="reverse",F="rotate",z="rotate3d",B="rotateX",Z="rotateY",q="rotateZ",P="scale",N="scale3d",U="scaleX",G="scaleY",H="scaleZ",J="skew",K="skewX",V="skewY",W="transform",$="translate",tt="translate3d",et="translateX",nt="translateY",rt="translateZ",it="x",at="y",ot="z",st=Array.prototype.slice,ut=Array.prototype.push,ct=Object.prototype.toString,ft=function(){for(var t=arguments,e=t[0],n=1,r=t.length;r>n;n++){var i=t[n];for(var a in i)o(e[a])||(e[a]=i[a])}return e},lt=function(t){var e={};for(var n in t){var r=t[n];s(r)?r=r():c(r)&&(r=lt(r)),e[n]=r}return e};p.prototype={_fn:D,trigger:function(t,e){var n=this._fn[t];if(n)for(var r=n.length,i=0;r>i;i++)n[i].apply(D,e)},on:function(t,e){if(!s(e))throw v("listener");var n=this._fn,r=n[t];return r?void(-1===r.indexOf(e)&&r.push(e)):void(n[t]=[e])},off:function(t,e){var n=this._fn[t];if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},d.prototype={_dispatcher:D,_duration:D,_endTime:D,_iterationStart:D,_iterations:D,_startTime:D,_totalDuration:D,currentTime:function(t){var e=this;return o(t)?(e._animator.currentTime=t,e):e._animator.currentTime},playbackRate:function(t){var e=this;return o(t)?(e._animator.playbackRate=t,e):e._animator.playbackRate},playState:function(){return this._animator.playState},iterationStart:function(){return this._iterationStart},iterations:function(){return this._iterations},totalDuration:function(){return this._totalDuration},duration:function(){return this._duration},endTime:function(){return this._endTime},startTime:function(){return this._startTime},off:function(t,e){return this._dispatcher.off(t,e),this},on:function(t,e){return this._dispatcher.on(t,e),this},cancel:function(){var t=this;return t._animator.cancel(),t._dispatcher.trigger(C),t},reverse:function(){var t=this;return t._animator.reverse(),t._dispatcher.trigger(Y),t},pause:function(){var t=this;return t._animator.pause(),t._dispatcher.trigger(E),t},play:function(){var t=this;return t._animator.play(),t._dispatcher.trigger(M),t},finish:function(){var t=this;return t._animator.finish(),t}};var _t=function(){for(var t=arguments,e=t[0],n=s(e)?e():e,r=t.length,i=1;r>i;i++)n=t[i](n);return n},vt=/([a-z])[- ]([a-z])/gi,ht=function(){var e=arguments;return e[0]+"("+t(e,1).join(",")+")"},pt={easeInBack:ht(L,.6,-.28,.735,.045),easeInCirc:ht(L,.6,.04,.98,.335),easeInCubic:ht(L,.55,.055,.675,.19),easeInExpo:ht(L,.95,.05,.795,.035),easeInOutBack:ht(L,.68,-.55,.265,1.55),easeInOutCirc:ht(L,.785,.135,.15,.86),easeInOutCubic:ht(L,.645,.045,.355,1),easeInOutExpo:ht(L,1,0,0,1),easeInOutQuad:ht(L,.455,.03,.515,.955),easeInOutQuart:ht(L,.77,0,.175,1),easeInOutQuint:ht(L,.86,0,.07,1),easeInOutSine:ht(L,.445,.05,.55,.95),easeInQuad:ht(L,.55,.085,.68,.53),easeInQuart:ht(L,.895,.03,.685,.22),easeInQuint:ht(L,.755,.05,.855,.06),easeInSine:ht(L,.47,0,.745,.715),easeOutBack:ht(L,.175,.885,.32,1.275),easeOutCirc:ht(L,.075,.82,.165,1),easeOutCubic:ht(L,.215,.61,.355,1),easeOutExpo:ht(L,.19,1,.22,1),easeOutQuad:ht(L,.25,.46,.45,.94),easeOutQuart:ht(L,.165,.84,.44,1),easeOutQuint:ht(L,.23,1,.32,1),easeOutSine:ht(L,.39,.575,.565,1),elegantSlowStartEnd:ht(L,.175,.885,.32,1.275)},dt="offset",mt=1/30;k.prototype={_currentTime:D,_dispatcher:D,_duration:D,_endTime:D,_events:D,_iterationStart:D,_iterations:D,_lastTick:D,_playState:D,_playbackRate:D,_resolver:D,_startTime:D,_timeLoop:D,_totalDuration:D,animate:function(t){var n=this;return a(t)?e(t,function(t){return n._addEvent(t)}):n._addEvent(t),n._recalculate(),n},duration:function(){return this._duration},iterationStart:function(){return this._iterationStart},iterations:function(){return this._iterations},totalDuration:function(){return this._totalDuration},endTime:function(){return this._endTime},startTime:function(){return this._startTime},currentTime:function(t){var e=this;return o(t)?(e._currentTime=t,e):e._currentTime},playbackRate:function(t){var e=this;return o(t)?(e._playbackRate=t,e):e._playbackRate},playState:function(t){var e=this;return o(t)?(e._playState=t,e._dispatcher.trigger("set",["playbackState",t]),e):e._playState},on:function(t,e){var n=this;return n._dispatcher.on(t,e),n},off:function(t,e){var n=this;return n._dispatcher.off(t,e),n},finish:function(){var t=this;return t._dispatcher.trigger(X,[t]),t},play:function(){var t=this;return("running"!==t._playState||"pending"!==t._playState)&&(t._playState="pending",t._timeLoop.on(t._onTick)),t},pause:function(){var t=this;return t._dispatcher.trigger(E,[t]),t},reverse:function(){var t=this;return t._playbackRate*=-1,t},cancel:function(){var t=this;return t._dispatcher.trigger(C,[t]),t},_recalculate:function(){var t=this,e=n(t._events,function(t){return t.startTimeMs+t.animator.totalDuration()});t._endTime=e,t._duration=e,t._totalDuration=e},_addEvent:function(t){var e=this,n=h(t.targets);if(t.name){var a=e._resolver.findAnimation(t.name);if(!o(a))throw v("name");ft(t,a)}t.from=t.from||0,t.to=t.to||0,t.easing?t.easing=pt[t.easing]||t.easing:t.easing="linear";var s=r(n,function(n){var i=t.to+e._duration,a=t.from+e._duration,o=r(t.keyframes,lt),s=r(o,w),u=_t(s,y,T);return{animator:d(n,u,t),endTimeMs:i,startTimeMs:a}});i(e._events,s)},_onCancel:function(t){t._timeLoop.off(t._onTick),t._currentTime=0,t._playState="idle",t._lastTick=D,e(t._events,function(t){t.animator.cancel()})},_onFinish:function(t){t._timeLoop.off(t._onTick),t._currentTime=0,t._playState="finished",t._lastTick=D,e(t._events,function(t){t.animator.finish()})},_onPause:function(t){t._timeLoop.off(t._onTick),t._playState="paused",t._lastTick=D,e(t._events,function(t){t.animator.pause()})},_onTick:function(t,e){var n=this,r=n._dispatcher,i=n._playState;if("idle"===i)return void r.trigger(C,[n]);if("finished"===i)return void r.trigger(X,[n]);if("paused"===i)return void r.trigger(E,[n]);var a=n._playbackRate,o=0>a,s=n._duration,u=o?s:0,c=o?0:s;if("pending"===n._playState){var f=n._currentTime;n._currentTime=f===D||f===c?u:f,n._playState="running"}var l=performance.now(),v=n._lastTick;if(v!==D){var h=(l-v)*a;n._currentTime+=h}n._lastTick=l;var p=n._currentTime;if(!_(p,u,c))return void r.trigger(X,[n]);for(var d=n._events,m=d.length,g=0;m>g;g++){var y=d[g],T=0>a?y.startTimeMs:y.startTimeMs+mt,w=a>=0?y.endTimeMs:y.endTimeMs-mt,k=p>=T&&w>p;if(k){var S=y.animator;S.playbackRate(a),S.play()}}}};var gt=performance&&performance.now?function(){return performance.now()}:function(){return Date.now()},yt=window.requestAnimationFrame!==D?function(t,e){window.requestAnimationFrame(function(){e(t)})}:function(t,e){setTimeout(function(){e(t)},16.66)};S.prototype={on:function(t){var e=this,n=e.offs.indexOf(t);-1!==n&&e.offs.splice(n,1),-1===e.ons.indexOf(t)&&e.ons.push(t),e.isActive||(e.isActive=!0,yt(e,O))},off:function(t){var e=this,n=e.ons.indexOf(t);-1!==n&&e.ons.splice(n,1),-1===e.offs.indexOf(t)&&e.offs.push(t),e.isActive||(e.isActive=!0,yt(e,O))}};var Tt={};A.prototype={defs:D,findAnimation:function(t){return this.defs[t]||Tt[t]||D},registerAnimation:function(t,e){return e?void(Tt[t.name]=t):void(this.defs[t.name]=t)}},I.inject=x,I.prototype={_resolver:D,_timeLoop:D,animate:function(t){var e=k(this._resolver,this._timeLoop);return e.animate(t),e},register:function(t){this._resolver.registerAnimation(t,!1)},inject:x},"undefined"!=typeof angular&&angular.module("just.animate",[]).service("just",I),window.just=I()}();