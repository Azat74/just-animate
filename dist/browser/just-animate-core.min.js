!function(){"use strict";function t(t){return!n(t)&&r(t.length)}function e(t){return void 0!==t&&null!==t&&""!==t}function i(t){return"[object Function]"===y.call(t)}function r(t){return"number"==typeof t}function n(t){return"string"==typeof t}function a(){}function s(t){return!t||t.length<1?void 0:t[0]}function o(t){return g.call(t,0)}function u(t,e){for(var i=0,r=t.length;r>i;i++)e(t[i])}function c(t,e){for(var i="",r=0,n=t.length;n>r;r++){var a=t[r],s=a[e];s>i&&(i=s)}return i}function f(t,e){for(var i=[],r=0,n=t.length;n>r;r++){var a=e(t[r]);void 0!==a&&i.push(a)}return i}function h(t,e,r,n){for(var a=[],s=[],o=0,u=t.length;u>o;o++)try{var c=t[o],f=void 0;f=e?c[e].apply(c,r):c.apply(void 0,r),void 0!==f&&s.push(f)}catch(t){a.push(t)}return i(n)&&n(a),s}function l(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=1,n=arguments.length;n>r;r++){var a=arguments[r];for(var s in a)t[s]=a[s]}return t}function m(t,e,i){return e+i.toUpperCase()}function p(t){var e=f(t.keyframes,v);return{keyframes:d(e),name:t.name,timings:l({},t.timings)}}function d(t){var i=t.length;if(2>i)return t;var n=t[0];0!==n.offset&&(n.offset=0);var a=t[i-1];1!==a.offset&&(a.offset=1);for(var s=i-1,o=1;s>o;o++){var u=t[o];if(!r(u.offset))for(var c=o+1;i>c;c++)if(r(t[c].offset)){for(var f=t[o-1].offset,h=t[c].offset,l=h-f,m=c-o+1,p=1;m>p;p++)t[p-1+o].offset=p/c*l+f;o=c;break}}for(var o=1;i>o;o++){var d=t[o];for(var v in d)"offset"===v||e(n[v])||(n[v]=d[v])}for(var o=i-2;o>-1;o--){var d=t[o];for(var v in d)"offset"===v||e(a[v])||(a[v]=d[v])}return t}function v(e){var i=new Array(3),a=new Array(2),s=new Array(3),o={},u="";for(var c in e){var f=e[c];if(void 0!==f&&null!==f&&""!==f)switch(c){case"scale3d":if(t(f)){var h=f;if(3!==h.length)throw Error("scale3d requires x, y, & z");i[k]=h[k],i[w]=h[w],i[E]=h[E];continue}if(r(f)){i[k]=f,i[w]=f,i[E]=f;continue}throw Error("scale3d requires a number or number[]");case"scale":if(t(f)){var h=f;if(2!==h.length)throw Error("scale requires x & y");i[k]=h[k],i[w]=h[w];continue}if(r(f)){i[k]=f,i[w]=f;continue}throw Error("scale requires a number or number[]");case"scaleX":if(r(f)){i[k]=f;continue}throw Error("scaleX requires a number");case"scaleY":if(r(f)){i[w]=f;continue}throw Error("scaleY requires a number");case"scaleZ":if(r(f)){i[E]=f;continue}throw Error("scaleZ requires a number");case"skew":if(t(f)){var h=f;if(2!==h.length)throw Error("skew requires x & y");a[k]=h[k],a[w]=h[w];continue}if(r(f)){a[k]=f,a[w]=f;continue}throw Error("skew requires a number, string, string[], or number[]");case"skewX":if(n(f)){a[k]=f;continue}throw Error("skewX requires a number or string");case"skewY":if(n(f)){a[w]=f;continue}throw Error("skewY requires a number or string");case"rotate3d":if(t(f)){var h=f;if(4!==h.length)throw Error("rotate3d requires x, y, z, & a");u+=" rotate3d("+h[0]+","+h[1]+","+h[2]+","+h[3]+")";continue}throw Error("rotate3d requires an []");case"rotateX":if(n(f)){u+=" rotate3d(1, 0, 0, "+f+")";continue}throw Error("rotateX requires a string");case"rotateY":if(n(f)){u+=" rotate3d(0, 1, 0, "+f+")";continue}throw Error("rotateY requires a string");case"rotate":case"rotateZ":if(n(f)){u+=" rotate3d(0, 0, 1, "+f+")";continue}throw Error("rotateZ requires a string");case"translate3d":if(t(f)){var h=f;if(3!==h.length)throw Error("translate3d requires x, y, & z");s[k]=h[k],s[w]=h[w],s[E]=h[E];continue}if(n(f)||r(f)){s[k]=f,s[w]=f,s[E]=f;continue}throw Error("translate3d requires a number, string, string[], or number[]");case"translate":if(t(f)){var h=f;if(2!==h.length)throw Error("translate requires x & y");s[k]=h[k],s[w]=h[w];continue}if(n(f)||r(f)){s[k]=f,s[w]=f;continue}throw Error("translate requires a number, string, string[], or number[]");case"translateX":if(n(f)||r(f)){s[k]=f;continue}throw Error("translateX requires a number or string");case"translateY":if(n(f)||r(f)){s[w]=f;continue}throw Error("translateY requires a number or string");case"translateZ":if(n(f)||r(f)){s[E]=f;continue}throw Error("translateZ requires a number or string");case"transform":u+=" "+f;break;default:var l=c.replace(/([a-z])-([a-z])/gi,m);o[l]=f}}var p=void 0!==i[k],d=void 0!==i[w],v=void 0!==i[E];if(p&&v||d&&v){var b=i.map(function(t){return t||"1"}).join(",");u+=" scale3d("+b+")"}else p&&d?u+=" scale("+(i[k]||1)+", "+(i[w]||1)+")":p?u+=" scaleX("+i[k]+")":d?u+=" scaleX("+i[w]+")":v&&(u+=" scaleX("+i[E]+")");var _=void 0!==a[k],y=void 0!==a[w];_&&y?u+=" skew("+(a[k]||1)+", "+(a[w]||1)+")":_?u+=" skewX("+a[k]+")":y&&(u+=" skewX("+a[w]+")");var g=void 0!==s[k],I=void 0!==s[w],T=void 0!==s[E];if(g&&T||I&&T){var q=s.map(function(t){return t||"1"}).join(",");u+=" translate3d("+q+")"}else g&&I?u+=" translate("+(s[k]||1)+", "+(s[w]||1)+")":g?u+=" translateX("+s[k]+")":I?u+=" translateX("+s[w]+")":T&&(u+=" translateX("+s[E]+")");return u&&(o.transform=u),o}function b(e){if(!e)throw Error("source is undefined");if(n(e)){var r=document.querySelectorAll(e);return o(r)}if(e instanceof Element)return[e];if(i(e)){var a=e,s=a();return b(s)}if(t(e)){var c=[];return u(e,function(t){var e=b(t);c.push.apply(c,e)}),c}return[]}function _(){return void 0===C&&(C=new A),C}var y=Object.prototype.toString,g=Array.prototype.slice,k=0,w=1,E=2,I={easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",elegantSlowStartEnd:"cubic-bezier(0.175, 0.885, 0.320, 1.275)"},T=function(){function t(t,e,i,r){var a=this;if(e){var s;if(n(e)){var o=t.findAnimation(e);s=o.keyframes,r=l({},o.timings,r)}else s=d(f(e,v));if(r&&r.easing){var u=I[r.easing];u&&(r.easing=u)}this.duration=r.duration;var c=b(i);this._animators=h(c,"animate",[s,r]),this._animators.length>0&&(this._animators[0].onfinish=function(){a.finish()})}}return Object.defineProperty(t.prototype,"playbackRate",{get:function(){var t=s(this._animators);return t?t.playbackRate:0},set:function(t){u(this._animators,function(e){return e.playbackRate=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return c(this._animators,"currentTime")||0},set:function(t){u(this._animators,function(e){return e.currentTime=t})},enumerable:!0,configurable:!0}),t.prototype.finish=function(t){var e=this;return h(this._animators,"finish",[],t),this.playbackRate<0?u(this._animators,function(t){return t.currentTime=0}):u(this._animators,function(t){return t.currentTime=e.duration}),i(this.onfinish)&&this.onfinish(this),this},t.prototype.play=function(t){return h(this._animators,"play",[],t),this},t.prototype.pause=function(t){return h(this._animators,"pause",[],t),this},t.prototype.reverse=function(t){return h(this._animators,"reverse",[],t),this},t.prototype.cancel=function(t){return h(this._animators,"cancel",[],t),u(this._animators,function(t){return t.currentTime=0}),i(this.oncancel)&&this.oncancel(this),this},t}(),q=function(){function t(t,e){var i=f(e.steps,function(e){if(e.command||!e.name)return e;var i=t.findAnimation(e.name),r=l({},i.timings);return e.timings&&(r=l(r,e.timings)),{el:e.el,keyframes:i.keyframes,timings:i.timings}});this.onfinish=a,this._currentIndex=-1,this._manager=t,this._steps=i,e.autoplay===!0&&this.play()}return Object.defineProperty(t.prototype,"currentTime",{get:function(){var t=this._currentIndex,e=this._steps.length;if(-1===t||t===e)return 0;for(var i,r=-1===this.playbackRate,n=0,a=0,s=0;e>s;s++){var o=this._steps[s];t>s?n+=o.timings.duration:s>t?a+=o.timings.duration:i=r?this.duration-o.animator.currentTime:o.animator.currentTime}return i+(r?a:n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._steps.reduce(function(t,e){return t+(e.timings.duration||0)},0)},enumerable:!0,configurable:!0}),t.prototype.finish=function(t){this._errorCallback=t,this._currentIndex=-1;for(var e=0;e<this._steps.length;e++){var r=this._steps[e];void 0!==r.animator&&r.animator.cancel(t)}return i(this.onfinish)&&this.onfinish(this),this},t.prototype.play=function(t){return this._errorCallback=t,this.playbackRate=1,this._playThisStep(),this},t.prototype.pause=function(t){if(this._errorCallback=t,!this._isInEffect())return this;var e=this._getAnimator();return e.pause(t),this},t.prototype.reverse=function(t){return this._errorCallback=t,this.playbackRate=-1,this._playThisStep(),this},t.prototype.cancel=function(t){this._errorCallback=t,this.playbackRate=void 0,this._currentIndex=-1;for(var e=0;e<this._steps.length;e++){var r=this._steps[e];void 0!==r.animator&&r.animator.cancel(t)}return i(this.oncancel)&&this.oncancel(this),this},t.prototype._isInEffect=function(){return this._currentIndex>-1&&this._currentIndex<this._steps.length},t.prototype._getAnimator=function(){var t=this._steps[this._currentIndex];return t.animator?t.animator:(t.animator=this._manager.animate(t.keyframes,t.el,t.timings),t.animator)},t.prototype._playNextStep=function(t){-1===this.playbackRate?this._currentIndex--:this._currentIndex++,this._isInEffect()?this._playThisStep():this.onfinish(t)},t.prototype._playThisStep=function(){var t=this;this._isInEffect()||(-1===this.playbackRate?this._currentIndex=this._steps.length-1:this._currentIndex=0);var e=this._getAnimator();e.onfinish=function(e){t._playNextStep(e)},e.play(this._errorCallback)},t}(),z=1/30,x=function(){function t(t,e){var i=e.duration;if(void 0===i)throw Error("Duration is required");this.playbackRate=0,this.duration=e.duration,this.currentTime=0,this._events=f(e.events,function(e){return new O(t,i,e)}),this._isPaused=!1,this._manager=t,this._tick=this._tick.bind(this),e.autoplay&&this.play()}return t.prototype.finish=function(t){return this._isFinished=!0,this},t.prototype.play=function(t){return this.playbackRate=1,this._isPaused=!1,this._isInEffect?this:(this.playbackRate<0?this.currentTime=this.duration:this.currentTime=0,window.requestAnimationFrame(this._tick),this)},t.prototype.pause=function(t){return this._isInEffect&&(this._isPaused=!0),this},t.prototype.reverse=function(t){return this.playbackRate=-1,this._isPaused=!1,this._isInEffect?this:(this.currentTime<=0&&(this.currentTime=this.duration),window.requestAnimationFrame(this._tick),this)},t.prototype.cancel=function(t){return this.playbackRate=0,this._isCanceled=!0,this},t.prototype._tick=function(){var t=this;if(this._isCanceled)return void this._triggerCancel();if(this._isFinished)return void this._triggerFinish();if(this._isPaused)return void this._triggerPause();this._isInEffect||(this._isInEffect=!0);var e=performance.now(),i=this._lastTick;if(void 0!==i){var r=(e-i)*this.playbackRate;this.currentTime+=r}return this._lastTick=e,this.currentTime>this.duration||this.currentTime<0?void this._triggerFinish():(u(this._events,function(e){var i=t.playbackRate<0?e.startTimeMs:e.startTimeMs+z,r=t.playbackRate>=0?e.endTimeMs:e.endTimeMs-z,n=i<=t.currentTime&&t.currentTime<r;return n?(e.animator.playbackRate=t.playbackRate,e.isInEffect=!0,void e.animator.play()):void(e.isInEffect=!1)}),void window.requestAnimationFrame(this._tick))},t.prototype._triggerFinish=function(){this._reset(),u(this._events,function(t){return t.animator.finish()}),i(this.onfinish)&&this.onfinish(this)},t.prototype._triggerCancel=function(){this._reset(),u(this._events,function(t){return t.animator.cancel()}),i(this.oncancel)&&this.oncancel(this)},t.prototype._triggerPause=function(){this._isPaused=!0,this._isInEffect=!1,this._lastTick=void 0,this.playbackRate=0,u(this._events,function(t){t.isInEffect=!1,t.animator.pause()})},t.prototype._reset=function(){this.currentTime=0,this._lastTick=void 0,this._isCanceled=!1,this._isFinished=!1,this._isPaused=!1,this._isInEffect=!1,u(this._events,function(t){t.isInEffect=!1})},t}(),O=function(){function t(t,e,i){var r,n,a;if(i.name){var s=t.findAnimation(i.name),o=l({},s.timings);i.timings&&(n=l(o,i.timings)),r=s.keyframes,n=o,a=i.el}else r=i.keyframes,n=i.timings,a=i.el;var u=e*i.offset,c=u+n.duration,f=c>e;f&&(c=e),this.el=a,this.isClipped=f,this.isInEffect=!1,this.endTimeMs=c,this.keyframes=r,this.offset=i.offset,this.startTimeMs=u,this.timings=n,this._manager=t}return Object.defineProperty(t.prototype,"animator",{get:function(){return void 0===this._animator&&(this._animator=this._manager.animate(this.keyframes,this.el,this.timings),this._animator.pause()),this._animator},enumerable:!0,configurable:!0}),t}(),R=[],A=function(){function t(){var t=this;this._registry={},u(R,function(e){return t._registry[e.name]=e})}return t.inject=function(t){Array.prototype.push.apply(R,f(t,p))},t.prototype.animate=function(t,e,i){return new T(this,t,e,i)},t.prototype.animateSequence=function(t){return new q(this,t)},t.prototype.animateTimeline=function(t){return new x(this,t)},t.prototype.findAnimation=function(t){return this._registry[t]||void 0},t.prototype.register=function(t){return this._registry[t.name]=p(t),this},t}();"undefined"!=typeof angular&&angular.module("just.animate",[]).service("just",A);var C=void 0,S={animate:function(t,e,i){return _().animate(t,e,i)},animateSequence:function(t){return _().animateSequence(t)},animateTimeline:function(t){return _().animateTimeline(t)},findAnimation:function(t){return _().findAnimation(t)},inject:function(t){void 0!==C&&console.warn("Animations must be injected prior to using Just.*"),A.inject(t)},register:function(t){return _().register(t)}};window.Just=S}();