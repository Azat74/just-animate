<html>

<head>
    <title>Just Animate Demo</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
</head>

<body>
    <div class="container text-center">
        <h1>Showcase</h1>
        <hr/>

        <div id="animation-container"></div>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web-animations/2.1.4/web-animations.min.js"></script>
    <script src="../../dist/just-animate.js"></script>
    <script>
        (function() {
            function playAllAnimations(container) {
                var animations = Object.keys(Just)
                    .filter(function(name) {
                        return name.indexOf("_") !== 0 && name !== "animate" && name !== "register";
                    });
                
                var position = -1;
                var errors = 0;
                var passing = 0;
                
                function nextAnimation() {
                    ++position;
                    
                    // end recursive function
                    if (position >= animations.length) {
                        var summary = document.createElement('div');
                        summary.classList.add('alert');
                        
                        if (errors) {
                            summary.classList.add('alert-danger');
                            summary.innerHTML = 'There were ' + errors + ' errors. There were ' + passing + ' passing tests.';
                        } else {
                            summary.classList.add('alert-success');
                            summary.innerHTML = 'Everything is awesome. Everything is cool when your tests are all green!';
                        }
                        
                        container.insertBefore(summary, container.firstChild);
                        return;
                    }
                    
                    setTimeout(function() {
                        var animationName = animations[position];
                        
                        var newEl = document.createElement('h2');
                        try {
                            newEl.innerHTML = animationName;
                            Just[animationName](newEl);
                            ++passing;
                        } catch (err) {
                            ++errors;
                            newEl = document.createElement('pre');
                            newEl.innerHTML = animationName + ": " + err;
                            newEl.style.color = "red";
                        }
                        container.insertBefore(newEl, container.firstChild);
                        
                        nextAnimation();
                    }, 1000);
                }
                
                nextAnimation();
            }
            
            playAllAnimations(document.getElementById('animation-container'));
        })();
    </script>
</body>

</html>
